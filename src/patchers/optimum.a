;-------------------------------
; #Optimum
; self-overwriter that restores
; content later from custom sector
; e.g. StickyBear Math
;
; module by qkumba
;-------------------------------
!zone {
_optimum
         lda   gIsOptimum
         bne   .exit
         ldy   #17
         jsr   SearchTrack
         !byte $A9,$00,$85,$50,$A9,WILDCARD,$85,$51
         !byte $A0,WILDCARD,$A9,$00,$91,$50,$88,$D0
         !byte $FB
         bcs   +
         pha
         txa
         adc   #12
         tax
         pla
         ldy   #$01
         jsr   modify
         !byte $B1
+
         ldy   #10
         jsr   SearchTrack
         !byte $A0,$3C,$A9,$04,$20,$E2,$02,$B0
         !byte WILDCARD,$60
         bcs   +
         pha
         txa
         adc   #8
         tax
         pla
         ldy   #$01
         jsr   modify
         !byte $00
+
.exit
}
