;-------------------------------
; #Optimum
; self-overwriter that restores
; content later from custom sector
; e.g. StickyBear Math
;
; module by qkumba
;-------------------------------
!zone {
_optimum
         lda   gIsOptimum
         bne   .exit
         ldy   #13
         jsr   SearchTrack
         !byte $A9,WILDCARD,$85,WILDCARD,$A0,WILDCARD,$A9,$00
         !byte $91,$50,$88,$D0,$FB
         bcs   +
         pha
         txa
         adc   #8
         tax
         pla
         ldy   #$01
         jsr   modify
         !byte $24
+
         ldy   #10
         jsr   SearchTrack
         !byte $A0,$3C,$A9,$04,$20,$E2,$02,$B0
         !byte WILDCARD,$60
         bcs   +
         ldy   #$01
         jsr   modify
         !byte $60
+
.exit
}
